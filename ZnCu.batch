##silva.bacteria.fasta and trainset files need to be in same directory as sequence files##change mock community groups to fit sample IDs from runs##change match all file prefixes to project namepcr.seqs(fasta=silva.bacteria.fasta, start=11894, end=25319, keepdots=F) #trim to 16S variable region V4system(mv silva.bacteria.pcr.fasta silva.v4.fasta)make.contigs(file=ZnCu_amplicons.files, processors=8)summary.seqs()screen.seqs(fasta=current, group=current, summary=current, maxambig=0, maxlength=275)summary.seqs()unique.seqs()count.seqs(name=current, group=current)summary.seqs(count=current)align.seqs(fasta=current, reference=silva.v4.fasta)summary.seqs(fasta=current, count=current)screen.seqs(fasta=current, count=current, summary=current, start=1968, end=11550, maxhomop=8)summary.seqs(fasta=current, count=current)filter.seqs(fasta=current, vertical=T, trump=.)unique.seqs(fasta=current, count=current)pre.cluster(fasta=current, count=current, diffs=2)chimera.vsearch(fasta=current, count=current, dereplicate=t)remove.seqs(fasta=current, accnos=current)summary.seqs(fasta=current, count=current)classify.seqs(fasta=current, count=current, reference=trainset16_022016.rdp.fasta, taxonomy=trainset16_022016.rdp.tax, cutoff=80)remove.lineage(fasta=current, count=current, taxonomy=current, taxon=Chloroplast-Mitochondria-unknown-Archaea-Eukaryota)summary.tax(taxonomy=current, count=current)get.groups(count=current, fasta=current, groups=040884_MOCKCOMMUNITY-041011_MOCKCOMMUNITY-041023_MOCKCOMMUNITY-041203_MOCKCOMMUNITY)seq.error(fasta=current, count=current, reference=MOCK_20strain.fasta, aligned=F)dist.seqs(fasta=current, cutoff=0.03)cluster(column=current,	count=current)make.shared(list=current, count=current, label=0.03)rarefaction.single(shared=current)remove.groups(count=ZnCu_amplicons.trim.contigs.good.unique.good.filter.unique.precluster.denovo.vsearch.pick.pick.count_table, fasta=ZnCu_amplicons.trim.contigs.good.unique.good.filter.unique.precluster.pick.pick.fasta, taxonomy=current, groups=040884_MOCKCOMMUNITY-041011_MOCKCOMMUNITY-041023_MOCKCOMMUNITY-041203_MOCKCOMMUNITY)##OTUcluster.split(fasta=current, count=current, taxonomy=current, splitmethod=classify, taxlevel=1, cutoff=0.03)make.shared(list=current, count=current, label=0.03)classify.otu(list=current, count=current, taxonomy=current, label=0.03)rename.file(count=current, shared=current, constaxonomy=current, prefix=OTU)remove.rare(shared=current, nseqs=2)count.groups(shared=current)#run the next line after checking rarefaction curvesub.sample(shared=OTU.opti_mcc.0.03.pick.shared, size=3000)#Rarefaction curverarefaction.single(shared=OTU.opti_mcc.shared)##Phylotypephylotype(taxonomy=current)make.shared(list=current, count=current, label=1)classify.otu(list=current, count=current, taxonomy=current, label=1)rename.file(shared=current, constaxonomy=current, prefix=Phylo)remove.rare(shared=current, nseqs=2)count.groups(shared=current)#run the next line after checking rarefaction curvesub.sample(shared=Phylo.tx.1.pick.shared, size=3000)#alpha-diversitysummary.single(shared=OTU.opti_mcc.shared, calc=chao-shannon, subsample=T)#lefse#lefse(shared=Phylo.tx.1.pick.1.subsample.shared, design=ZnCu_amplicons.design)